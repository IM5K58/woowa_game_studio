<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ë¹„íŠ¸ì½”ì¸ ì±„êµ´ì¥</title>
    <style>
        body { background-color: #2c3e50; font-family: sans-serif; text-align: center; color: white; padding: 50px; }
        .container { max-width: 600px; margin: 0 auto; }

        h1 { color: #f1c40f; margin-bottom: 10px; }
        .money-display { font-size: 1.5rem; margin-bottom: 40px; }

        /* ì±„êµ´ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .mining-btn {
            background: none; border: none; font-size: 8rem; cursor: pointer;
            transition: transform 0.1s; user-select: none; /* ë“œë˜ê·¸ ë°©ì§€ */
        }
        .mining-btn:active { transform: scale(0.9) rotate(-10deg); } /* í´ë¦­ íš¨ê³¼ */

        .info { color: #bdc3c7; margin-top: 20px; }
        .back-btn { display: inline-block; margin-top: 50px; color: #ecf0f1; text-decoration: none; border: 1px solid #ecf0f1; padding: 10px 20px; border-radius: 5px; }
        .back-btn:hover { background-color: #ecf0f1; color: #2c3e50; }

        /* í´ë¦­ ì‹œ ë‚˜ì˜¤ëŠ” +100 íš¨ê³¼ */
        .floating-text {
            position: absolute; color: #2ecc71; font-weight: bold; font-size: 1.5rem;
            pointer-events: none; animation: floatUp 1s ease-out forwards;
        }
        @keyframes floatUp {
            0% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-50px); }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>â›ï¸ ê°€ìƒí™”í ì±„êµ´ì¥ â›ï¸</h1>
    <div class="money-display">
        ë‚´ ìì‚°: <span id="user-money" th:text="${#numbers.formatInteger(user.money, 0, 'COMMA')}">0</span>ì›
    </div>

    <button class="mining-btn" onclick="mine(event)">ğŸ’</button>

    <p class="info">í´ë¦­í•  ë•Œë§ˆë‹¤ 100ì›ì„ íšë“í•©ë‹ˆë‹¤!</p>

    <a href="/" class="back-btn">ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
</div>

<script>
    function mine(event) {
        //(AJAX) ì‚¬ìš©
        fetch('/mining/click', {
            method: 'POST'
        })
        .then(response => response.json())
        .then(data => {
            //í™”ë©´ ìˆ«ì ê°±ì‹ 
            document.getElementById('user-money').innerText = data.money.toLocaleString();

            // +100ì› íš¨ê³¼
            showFloatingText(event.clientX, event.clientY);
        })
        .catch(error => console.error('Error:', error));
    }

    function showFloatingText(x, y) {
        const el = document.createElement('div');
        el.classList.add('floating-text');
        el.innerText = '+100';
        el.style.left = x + 'px';
        el.style.top = y + 'px';
        document.body.appendChild(el);

        setTimeout(() => {
            el.remove();
        }, 1000);
    }
</script>

</body>
</html>